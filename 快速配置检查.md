# ğŸš€ AuraWind Helper Tool å¿«é€Ÿé…ç½®æŒ‡å—

## ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€ Xcode é¡¹ç›®

1. åŒå‡»æ‰“å¼€ `AuraWind.xcodeproj`
2. ç­‰å¾… Xcode åŠ è½½å®Œæˆ

---

## ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ SMCHelper Target

åœ¨ Xcode å·¦ä¸Šè§’ï¼Œç‚¹å‡» scheme é€‰æ‹©å™¨ï¼ˆæ˜¾ç¤ºé¡¹ç›®åç§°çš„åœ°æ–¹ï¼‰ï¼š

- âœ… å¦‚æœçœ‹åˆ° `SMCHelper` - å¤ªå¥½äº†ï¼è·³åˆ°**ç¬¬å››æ­¥**
- âŒ å¦‚æœæ²¡æœ‰ `SMCHelper` - ç»§ç»­**ç¬¬ä¸‰æ­¥**

---

## ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º SMCHelper Targetï¼ˆå¦‚æœéœ€è¦ï¼‰

### 3.1 åˆ›å»º Target

1. ç‚¹å‡»èœå•ï¼š`File` â†’ `New` â†’ `Target...`
2. åœ¨å¼¹å‡ºçª—å£ä¸­ï¼š
   - å·¦ä¾§é€‰æ‹© `macOS`
   - å³ä¾§é€‰æ‹© `Command Line Tool`
   - ç‚¹å‡» `Next`

3. å¡«å†™ä¿¡æ¯ï¼š
   ```
   Product Name: SMCHelper
   Language: Swift
   ```
   - ç‚¹å‡» `Finish`

### 3.2 åˆ é™¤è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶

Xcode ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ `SMCHelper` æ–‡ä»¶å¤¹å’Œ `main.swift`ï¼š
- å³é”®ç‚¹å‡»è¿™ä¸ª**æ–°åˆ›å»ºçš„** `SMCHelper` æ–‡ä»¶å¤¹
- é€‰æ‹© `Delete`
- é€‰æ‹© `Move to Trash`ï¼ˆåˆ é™¤å¼•ç”¨å’Œæ–‡ä»¶ï¼‰

---

## ç¬¬å››æ­¥ï¼šé…ç½®æ–‡ä»¶å½’å±

### 4.1 é…ç½® SMCHelper çš„æ–‡ä»¶

é€‰ä¸­ä»¥ä¸‹æ–‡ä»¶ï¼ˆæŒ‰ä½ `âŒ˜` é”®å¤šé€‰ï¼‰ï¼š
```
SMCHelper/
  â”œâ”€â”€ main.swift
  â”œâ”€â”€ Info.plist
  â””â”€â”€ Launchd.plist
```

ç„¶åï¼š
1. æŒ‰ `âŒ˜ + Option + 1` æ‰“å¼€ File Inspectorï¼ˆå³ä¾§é¢æ¿ï¼‰
2. æ‰¾åˆ° **Target Membership** éƒ¨åˆ†
3. âœ… å‹¾é€‰ `SMCHelper`
4. â¬œï¸ å–æ¶ˆå‹¾é€‰ `AuraWind`ï¼ˆå¦‚æœæœ‰ï¼‰

### 4.2 é…ç½®å…±äº«æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰

é€‰ä¸­ä»¥ä¸‹æ–‡ä»¶ï¼ˆè¿™äº›æ–‡ä»¶éœ€è¦ä¸¤ä¸ª target éƒ½èƒ½ç”¨ï¼‰ï¼š
```
AuraWind/Services/
  â”œâ”€â”€ SMCConnection.swift
  â””â”€â”€ HelperTool/HelperToolProtocol.swift

AuraWind/Models/
  â””â”€â”€ AuraWindError.swift
```

ç„¶åï¼š
1. æŒ‰ `âŒ˜ + Option + 1` æ‰“å¼€ File Inspector
2. åœ¨ **Target Membership** éƒ¨åˆ†ï¼š
   - âœ… å‹¾é€‰ `AuraWind`
   - âœ… å‹¾é€‰ `SMCHelper`

### 4.3 é…ç½®å…¶ä»– Helper Tool æ–‡ä»¶

é€‰ä¸­è¿™ä¸ªæ–‡ä»¶ï¼š
```
AuraWind/Services/HelperTool/
  â”œâ”€â”€ HelperToolManager.swift
  â””â”€â”€ (å…¶ä»–æ–‡ä»¶)
```

ç¡®ä¿ï¼š
- âœ… åªå‹¾é€‰ `AuraWind`
- â¬œï¸ ä¸å‹¾é€‰ `SMCHelper`

---

## ç¬¬äº”æ­¥ï¼šæ·»åŠ æ¡†æ¶ï¼ˆFrameworksï¼‰

### 5.1 ä¸º SMCHelper æ·»åŠ æ¡†æ¶

1. ç‚¹å‡»é¡¹ç›®æ–‡ä»¶ï¼ˆæœ€ä¸Šé¢çš„è“è‰²å›¾æ ‡ï¼‰
2. åœ¨ä¸­é—´é€‰æ‹© `SMCHelper` target
3. ç‚¹å‡» `Build Phases` æ ‡ç­¾
4. å±•å¼€ `Link Binary With Libraries`
5. ç‚¹å‡» `+` æŒ‰é’®ï¼Œæœç´¢å¹¶æ·»åŠ ï¼š
   - `IOKit.framework`
   - `Security.framework`
   - `ServiceManagement.framework`

### 5.2 ä¸º AuraWind æ·»åŠ æ¡†æ¶

1. é€‰æ‹© `AuraWind` target
2. åŒæ ·åœ¨ `Build Phases` â†’ `Link Binary With Libraries`
3. æ·»åŠ ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š
   - `ServiceManagement.framework`
   - `Security.framework`

---

## ç¬¬å…­æ­¥ï¼šé…ç½® Build Settingsï¼ˆå…³é”®ï¼ï¼‰

### 6.1 é€‰æ‹© SMCHelper Target

1. ç‚¹å‡»é¡¹ç›®æ–‡ä»¶
2. é€‰æ‹© `SMCHelper` target
3. ç‚¹å‡» `Build Settings` æ ‡ç­¾
4. **é‡è¦**ï¼šåœ¨é¡¶éƒ¨é€‰æ‹© `All`ï¼ˆä¸æ˜¯ Basicï¼‰

### 6.2 ä¿®æ”¹è®¾ç½®ï¼ˆç”¨æœç´¢æ¡†ï¼‰

åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œé€ä¸ªä¿®æ”¹ï¼š

#### è®¾ç½® 1: Product Name
```
æœç´¢: Product Name
è®¾ç½®ä¸º: com.aurawind.AuraWind.SMCHelper
```

#### è®¾ç½® 2: Skip Install
```
æœç´¢: Skip Install
è®¾ç½®ä¸º: NO
```

#### è®¾ç½® 3: Installation Directory
```
æœç´¢: Installation Directory
è®¾ç½®ä¸º: $(CONTENTS_FOLDER_PATH)/Library/LaunchServices
```

#### è®¾ç½® 4: Code Signing Identity
```
æœç´¢: Code Signing Identity
é€‰æ‹©: Apple Development (æˆ–ä½ çš„è¯ä¹¦)
```

#### è®¾ç½® 5: Enable Hardened Runtime
```
æœç´¢: Enable Hardened Runtime
è®¾ç½®ä¸º: YES
```

---

## ç¬¬ä¸ƒæ­¥ï¼šé…ç½® Launchd.plist å¤åˆ¶

### 7.1 æ·»åŠ  Copy Files Phase

1. ç¡®ä¿é€‰ä¸­ `SMCHelper` target
2. åœ¨ `Build Phases` æ ‡ç­¾ä¸­
3. ç‚¹å‡»å·¦ä¸Šè§’çš„ `+` æŒ‰é’®
4. é€‰æ‹© `New Copy Files Phase`

### 7.2 é…ç½® Copy Files

1. å±•å¼€æ–°åˆ›å»ºçš„ `Copy Files` éƒ¨åˆ†
2. è®¾ç½®ï¼š
   - **Destination**: é€‰æ‹© `Wrapper`
   - **Subpath**: è¾“å…¥ `Contents/Library/LaunchServices`
3. ç‚¹å‡» `+` æŒ‰é’®
4. æ‰¾åˆ°å¹¶æ·»åŠ  `Launchd.plist`

---

## ç¬¬å…«æ­¥ï¼šæµ‹è¯•ç¼–è¯‘

### 8.1 ç¼–è¯‘ SMCHelper

1. åœ¨å·¦ä¸Šè§’ scheme é€‰æ‹©å™¨ä¸­é€‰æ‹© `SMCHelper`
2. æŒ‰ `âŒ˜ + B` ç¼–è¯‘
3. åº”è¯¥æ˜¾ç¤º **Build Succeeded** âœ…

### 8.2 ç¼–è¯‘ AuraWind

1. é€‰æ‹© `AuraWind` scheme
2. æŒ‰ `âŒ˜ + B` ç¼–è¯‘
3. åº”è¯¥æ˜¾ç¤º **Build Succeeded** âœ…

---

## âœ… å®Œæˆï¼

å¦‚æœä¸¤ä¸ª target éƒ½ç¼–è¯‘æˆåŠŸï¼Œé…ç½®å°±å®Œæˆäº†ï¼

---

## ğŸ› é‡åˆ°é”™è¯¯ï¼Ÿ

### é”™è¯¯ 1: "No such module 'IOKit'"
**è§£å†³**ï¼šæ£€æŸ¥ç¬¬äº”æ­¥ï¼Œç¡®ä¿æ·»åŠ äº† `IOKit.framework`

### é”™è¯¯ 2: "Use of unresolved identifier 'SMCConnection'"
**è§£å†³**ï¼šæ£€æŸ¥ç¬¬å››æ­¥ 4.2ï¼Œç¡®ä¿ `SMCConnection.swift` åŒæ—¶å±äºä¸¤ä¸ª target

### é”™è¯¯ 3: "Use of unresolved identifier 'HelperToolProtocol'"
**è§£å†³**ï¼šæ£€æŸ¥ç¬¬å››æ­¥ 4.2ï¼Œç¡®ä¿ `HelperToolProtocol.swift` åŒæ—¶å±äºä¸¤ä¸ª target

### é”™è¯¯ 4: ç¼–è¯‘æˆåŠŸä½†è¿è¡Œå´©æºƒ
**è§£å†³**ï¼šæ£€æŸ¥ç¬¬ä¸ƒæ­¥ï¼Œç¡®ä¿ `Launchd.plist` è¢«æ­£ç¡®å¤åˆ¶

---

## ğŸ“¸ éœ€è¦æˆªå›¾å¸®åŠ©ï¼Ÿ

å¦‚æœæŸä¸ªæ­¥éª¤ä¸æ¸…æ¥šï¼Œå‘Šè¯‰æˆ‘ä½ åœ¨å“ªä¸€æ­¥ï¼Œæˆ‘å¯ä»¥ï¼š
1. æä¾›æ›´è¯¦ç»†çš„è¯´æ˜
2. å‘Šè¯‰ä½ å…·ä½“è¦ç‚¹å‡»ä»€ä¹ˆ
3. è§£é‡Šä¸ºä»€ä¹ˆè¦è¿™æ ·åš

---

## ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼ŒæŸ¥çœ‹ `USAGE_EXAMPLE.md` äº†è§£å¦‚ä½•ä½¿ç”¨ Helper Toolï¼
